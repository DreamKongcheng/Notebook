<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Chap 5 Digital Hardware Implementation - 我的第一个站点</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">我的第一个站点</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">Welcome to MkDocs</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">ZJU CS <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../" class="dropdown-item">ZJU CS 课程</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">DigitalDesign</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../" class="dropdown-item">[大二秋冬] 数字逻辑设计 | Digital Design</a>
</li>
            
<li>
    <a href="../Chap01/" class="dropdown-item">Chap 1 Digital Systems and Information</a>
</li>
            
<li>
    <a href="../Chap02/" class="dropdown-item">Chap 2 Combinational Logic Circuits</a>
</li>
            
<li>
    <a href="../Chap03/" class="dropdown-item">Chap 3 Combinational Logic Design</a>
</li>
            
<li>
    <a href="../Chap04/" class="dropdown-item">Chap 4 Sequential Circuits</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Chap 5 Digital Hardware Implementation</a>
</li>
            
<li>
    <a href="../Chap06/" class="dropdown-item">Chap 6 Registers & Register Transfers</a>
</li>
            
<li>
    <a href="../Chap07/" class="dropdown-item">Chap 7 Memory Basics</a>
</li>
            
<li>
    <a href="../glossary/" class="dropdown-item">词汇表</a>
</li>
            
<li>
    <a href="../learnskill/" class="dropdown-item">学习思路以及资源</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Discrete math</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Discrete%20math/" class="dropdown-item">离散数学</a>
</li>
            
<li>
    <a href="../../Discrete%20math/note/" class="dropdown-item">摘要</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">FDS</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../FDS/" class="dropdown-item">Index</a>
</li>
            
<li>
    <a href="../../FDS/algorithm/" class="dropdown-item">算法分析</a>
</li>
            
<li>
    <a href="../../FDS/exam/" class="dropdown-item">历年卷</a>
</li>
            
<li>
    <a href="../../FDS/graph/" class="dropdown-item">图论</a>
</li>
            
<li>
    <a href="../../FDS/hash/" class="dropdown-item">散列（哈希）</a>
</li>
            
<li>
    <a href="../../FDS/heap/" class="dropdown-item">优先队列（堆）</a>
</li>
            
<li>
    <a href="../../FDS/homework/" class="dropdown-item">作业要点</a>
</li>
            
<li>
    <a href="../../FDS/set/" class="dropdown-item">并查集</a>
</li>
            
<li>
    <a href="../../FDS/sort/" class="dropdown-item">排序</a>
</li>
            
<li>
    <a href="../../FDS/tree/" class="dropdown-item">树</a>
</li>
            
<li>
    <a href="../../FDS/%E6%95%B0%E7%BB%84%E4%B8%8E%E9%93%BE%E8%A1%A8/" class="dropdown-item">数组与链表</a>
</li>
            
<li>
    <a href="../../FDS/%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/" class="dropdown-item">栈和队列</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">HPC</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../HPC/" class="dropdown-item">ZJUSCT</a>
</li>
            
<li>
    <a href="../../HPC/AIPP/" class="dropdown-item">并行计算设计导论</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Class</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../HPC/class/" class="dropdown-item">note of class</a>
</li>
            
<li>
    <a href="../../HPC/class/L1/" class="dropdown-item">7月4日 计算机体系结构和高性能计算基础</a>
</li>
            
<li>
    <a href="../../HPC/class/L2/" class="dropdown-item">7月5日 高性能计算方法论（HPC）</a>
</li>
            
<li>
    <a href="../../HPC/class/L3/" class="dropdown-item">7月6日 集群软硬件以及运维基础</a>
</li>
            
<li>
    <a href="../../HPC/class/L4/" class="dropdown-item">7月8日 向量化并行计算基础</a>
</li>
            
<li>
    <a href="../../HPC/class/L5/" class="dropdown-item">7月9日 GPU (Graphic Processing Unit)</a>
</li>
            
<li>
    <a href="../../HPC/class/L6/" class="dropdown-item">7月10日 OpenMP</a>
</li>
            
<li>
    <a href="../../HPC/class/L7/" class="dropdown-item">7月11号 机器学习（Machine Learning)</a>
</li>
            
<li>
    <a href="../../HPC/class/L8/" class="dropdown-item">高性能计算高级话术</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Homework</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../HPC/homework/lab1/" class="dropdown-item">Lab-1</a>
</li>
            
<li>
    <a href="../../HPC/homework/lab2.5/" class="dropdown-item">Lab-2</a>
</li>
            
<li>
    <a href="../../HPC/homework/lab2/" class="dropdown-item">Lab2 向量化计算</a>
</li>
            
<li>
    <a href="../../HPC/homework/lab3/" class="dropdown-item">Lab-3 基于CUDA对GEMM的优化</a>
</li>
            
<li>
    <a href="../../HPC/homework/lab4/" class="dropdown-item">Lab-4 PCG算法在OMP和MPI下的优化</a>
</li>
            
<li>
    <a href="../../HPC/homework/lab5/" class="dropdown-item">Lab-5 AI相关</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../Chap04/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../Chap06/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#chap-5-digital-hardware-implementation" class="nav-link">Chap 5 Digital Hardware Implementation</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#_1" class="nav-link">可重编程技术</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="chap-5-digital-hardware-implementation">Chap 5 Digital Hardware Implementation</h1>
<p>!!! warning "注意"
    本章节在补天中完成，内容可能比较简略。</p>
<hr />
<h2 id="_1">可重编程技术</h2>
<p><strong>可重编程技术(programmable implementation technologies)</strong></p>
<p>直接更改电路来修改电路功能被称为硬编程，而可重变成技术让我们能够不更改硬件布线的情况下，实现<strong>逻辑功能的重新编辑</strong>。</p>
<p>!!! example "FPGA"
    - <a href="https://zh.wikipedia.org/zh-cn/%E7%8E%B0%E5%9C%BA%E5%8F%AF%E7%BC%96%E7%A8%8B%E9%80%BB%E8%BE%91%E9%97%A8%E9%98%B5%E5%88%97">现场可编程逻辑门阵列(Field Programmable Gate Array)FPGA</a>
    - <a href="https://zh.m.wikipedia.org/zh-hans/%E6%9F%A5%E6%89%BE%E8%A1%A8">查找表(lookup table)LUT</a></p>
<p><strong>编程技术(programming technologies)</strong> 在硬件层面有三种实现手段：</p>
<ul>
<li>控制连接来实现（不是可重编程）；<ul>
<li>Mask programing（掩码编程）</li>
<li>Fuse（保险丝）</li>
<li>Anti-fuse</li>
</ul>
</li>
<li>控制门级电路电压；<ul>
<li>Single-bit storage element</li>
<li>Stored charge on a floating gate<ul>
<li>Erasable</li>
<li>Electrically erasable</li>
<li>Flash (as in Flash Memory) </li>
</ul>
</li>
</ul>
</li>
<li>使用查找表(LUT)；<ul>
<li>Storage elements for the function<ul>
<li>比如使用一个 <code>MUX</code>，并将输入端接内存，通过修改内存的值来修改 <code>MUX</code> 的行为，进而实现函数重编程</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>课程中介绍的可重编程的器件主要有如下四种：</p>
<ul>
<li>只读内存 Read Only Memory (ROM) </li>
<li>可编程阵列逻辑 Programmable Array Logic (PAL^Ⓡ^)</li>
<li>可编程逻辑阵列 Programmable Logic Array (PLA)</li>
<li>Complex Programmable Logic Device (CPLD) or Field-Programmable Gate Array(FPGA)</li>
</ul>
<p>前三者都只能重写一次，如下是它们的重写内容：</p>
<p><img alt="" src="../img/51.png" /></p>
<hr />
<p>!!! info "引入"
    由于之后出现的电路图会非常庞大，所以需要引入一些逻辑符号。</p>
<h3 id="_2">逻辑符号介绍</h3>
<p>!!! example "Buffer——简化表示一个变量的自身和其非"
    <img alt="" src="../img/52.png" /></p>
<p>!!! example "Wire connecting"
    在可编程逻辑电路中，线的连接不再只有单纯的连通和不连通的关系：</p>
<pre><code>对于两条相交导线：

- 如果没有特殊符号，则表示这个交叉点 is not connected ；

![](img/53.png)

- 如果有一个 ❌，则表示这个交叉点 programmable；

![](img/55.png)

- 如果只有一个加粗的点，则表示这个交叉点 not programmable；

![](img/54.png)
</code></pre>
<p>特别的，如果一个元器件的所有输入都是 programmable，我们也可以选择把这个 ❌ 画到逻辑门上（如下图 e 和 f）。</p>
<p><img alt="" src="../img/56.png" /></p>
<hr />
<h3 id="rom">ROM</h3>
<p>ROM 的基本结构如下：</p>
<p><img alt="" src="../img/57.png" /></p>
<p>而 ROM 的大小如下计算（以上图为例）：</p>
<p>$$
\begin{aligned}
    ROM\;\;size\;\;&amp;=\;\;address\;\;width\;\;\times\;\;word\;\;width&amp;\
                   &amp;=\;\;2^2\;\;\times\;\;4\;\;=\;\;16\;\;bit&amp;
\end{aligned}
$$</p>
<p>!!!+ example "eg"
    更清晰的表示其内部逻辑的，可以将 ROM 写成这样：
    <img alt="" src="../img/58.png" /></p>
<hr />
<h3 id="pal">PAL</h3>
<p><img alt="" src="../img/59.png" /></p>
<p>可重编程输入组合来得到固定输出。</p>
<p>其具有一个缺陷是，因为表达函数的方法不是通过 SOM 或者 POM 的形式，所以不一定能够完备表达函数。</p>
<p>在此基础上的一个改进是，通过将一个既有的 PAL 输出当作输入，输入到另外一个函数中，来弥补项不足的问题。</p>
<p>???+ example "eg"
    <img alt="" src="../img/60.png" /></p>
<hr />
<h3 id="pla">PLA</h3>
<p><img alt="" src="../img/61.png" /></p>
<p>与 PAL 的区别在于，在输出的时候也能对输出组合进行重编程。</p>
<p>其同 PAL 一样具有一个缺陷是，因为表达函数的方法不是通过 SOM 或者 POM 的形式，所以不一定能够完备表达函数。</p>
<p>在基础上一个改进是在输出的时候再做一次异或（不用非门体现了可重编程的思想），以产生新的项，来弥补项不足的问题。
<strong>Attention:注意XOR的作用！！！</strong></p>
<p><img alt="" src="../img/62.png" /></p>
<p>可以发现，出现了新的项。</p>
<hr />
<h3 id="lookup-tables">Lookup Tables</h3>
<p><img alt="" src="../img/63.png" /></p>
<p>通过让数据源接内存，并通过修改真值表内的值，即修改内存里的值，来实现数据源的变化，来改变 <code>MUX</code> 的行为。</p>
<p>但是实际应用中，函数输入的数量会变化，因此我们需要通过灵活组合的方法（比如通过四选二选一的方式，用三个二选一的 <code>MUX</code> 来实现四选一）来实现多输入。</p>
<p>常见的 <code>LUT</code> 大小以 16bits 或 64bits 的 4 输入或 6 输入为主。</p>
<p>由于 <code>LUT</code> 存的本质上是真值表，所以它可以实现任意输入符合要求的逻辑函数。</p>
<p>所以，问题就变化为如何用较小的 <code>LUT</code> 来组合实现复杂的逻辑函数。</p>
<p><code>LUT</code> 的基本结构如下：</p>
<p><img alt="" src="../img/64.png" /></p>
<p><code>FPGA</code> 的基本结构如下：</p>
<p><img alt="" src="../img/65.png" /></p>
<p>其主要分为三个组成部分：</p>
<ul>
<li>CLB(Configurable Logic Block)<ul>
<li>大量存储 <code>LUT</code></li>
</ul>
</li>
<li>SM(Switch Matrix)<ul>
<li>可编程的交换矩阵</li>
</ul>
</li>
<li>IOB(Input &amp; Output Block)<ul>
<li>可编程的输入输出单元</li>
</ul>
</li>
</ul>
<hr />
<h4 id="clb">CLB</h4>
<p>CLB 是 <code>FPGA</code> 中的基础逻辑单元。</p>
<p><img alt="" src="../img/66.png" /></p>
<hr />
<h4 id="sm">SM</h4>
<p>通过相当复杂的算法， <code>SM</code> 会根据目标逻辑，选择链接不同的 <code>CLB</code> 以实现复杂逻辑。</p>
<p>它具有这些基本属性：</p>
<ol>
<li>Flexibility: 评估一条线可以连接到多少线；</li>
<li>Topology: 哪些线可以被连接到；</li>
<li>Routability: 有多少回路可以被路由；</li>
</ol>
<p><img alt="" src="../img/68.png" /></p>
<hr />
<h4 id="iob">IOB</h4>
<p><code>IOB</code> 用来对外部设备进行连接，用来控制输入和输出。</p>
<p><img alt="" src="../img/67.png" /></p>
<hr />
<p>!!! note "eg for <code>FPGA</code>"
    通过 <code>FPGA</code> 实现 $f=x_1x_2+\overline{x_2x_3}$：</p>
<pre><code>分解问题：
$f_1 = x_1x_2,\;\;f_2=\overline{x_2x_3},\;\;f=f_1+f_2$。

![](img/69.png)
</code></pre>
<p>在软件层面编程完后，会生成位流文件(<code>bitfile</code>)，下载到板时会更新 <code>FPGA</code> 中的内容。</p>
<hr />
<p>!!! summary "组合函数的实现方法"
    到目前为止，不管是可重编程还是不可重编程，都已经介绍了很多方法，这里进行一次小结：</p>
<pre><code>1. `Decoder`s &amp; `OR` gates
     - 将译码出来的需要的目标组合都 `OR` 在一起；
2. `MUX`s
     - 通过多路选择器实现任意逻辑函数； 
3. `ROM`s
4. `PAL`s
5. `PLA`s
6. `LUT`s
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../js/jquery-3.6.0.min.js"></script>
        <script src="../../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js"></script>
        <script src="../../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
